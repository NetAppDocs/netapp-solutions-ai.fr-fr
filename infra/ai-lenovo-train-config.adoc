---
sidebar: sidebar 
permalink: infra/ai-lenovo-train-config.html 
keywords: solution architecture, storage controller 
summary: 'Cette section décrit les configurations testées, l"infrastructure réseau, le serveur SR670 V2 et les détails de provisionnement du stockage.' 
---
= Configuration de test
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Cette section décrit les configurations testées, l'infrastructure réseau, le serveur SR670 V2 et les détails de provisionnement du stockage NetApp .



== Architecture de la solution

Nous avons utilisé les composants de solution répertoriés dans le tableau suivant pour cette validation.

|===
| Composants de la solution | Détails 


| Serveurs Lenovo ThinkSystem  a| 
* Deux serveurs SR670 V2 équipés chacun de huit cartes GPU NVIDIA A100 80 Go
* Chaque serveur contient 2 processeurs Intel Xeon Platinum 8360Y (28 cœurs physiques) et 1 To de RAM




| Linux (Ubuntu – 20.04 avec CUDA 11.8) |  


| Système de stockage NetApp AFF (paire HA)  a| 
* Logiciel NetApp ONTAP 9.10.1
* 24x SSD de 960 Go
* Protocole NFS
* 1 groupe d'interfaces (ifgrp) par contrôleur, avec quatre adresses IP logiques pour les points de montage


|===
Dans cette validation, nous avons utilisé ResNet v2.0 avec l'ensemble de base ImageNet tel que spécifié par MLPerf v2.0.  L'ensemble de données est stocké dans un système de stockage NetApp AFF avec le protocole NFS.  Les SR670 ont été connectés au système de stockage NetApp AFF A400 via un commutateur 100 GbE.

ImageNet est un ensemble de données d'images fréquemment utilisé.  Il contient près de 1,3 million d'images pour une taille totale de 144 Go.  La taille moyenne de l'image est de 108 Ko.

La figure suivante illustre la topologie du réseau de la configuration testée.

image:a400-thinksystem-007.png["Ce graphique représente la couche de calcul, un Lenovo ThinkSystem SR670 V2, la couche réseau, un commutateur Ethernet Lenovo et la couche de stockage, un contrôleur de stockage NetApp AFF A400 .  Toutes les connexions réseau sont incluses."]



== Contrôleur de stockage

Le tableau suivant répertorie la configuration de stockage.

|===
| Contrôleur | Agrégat | Volume FlexGroup | Taille des agrégats | Taille du volume | Point de montage du système d'exploitation 


| Controller1 | Aggr1 | /a400-100g | 9,9 To | 19 To | /a400-100g 


| Controller2 | Aggr2 | /a400-100g | 9,9 To |  | /a400-100g 
|===

NOTE: Le dossier /a400-100g contient l'ensemble de données utilisé pour la validation ResNet.
